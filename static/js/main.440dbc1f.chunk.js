(this["webpackJsonpcollege-query"]=this["webpackJsonpcollege-query"]||[]).push([[0],{303:function(e,t,r){"use strict";r.r(t);var a=r(0),n=r.n(a),c=r(67),s=r.n(c),i=r(31),o=r(25),l=r.n(o),u=r(45),d=r(3),j=r(326),h=r(56),b=r(318),p=r(319),m=r(329),O=r(320),f=r(321),x=r(323),v=r(315),g=r(316),k=r(322),w=r(39),y=r(12),T=r(44),S=r(49),E=r(37),q=r.n(E),I=r(324),C=r(15),P=r.n(C),z=r(2);var F=function(){var e=S.a({email:S.b().email().required("Email is a required field"),password:S.b().required("Please enter your password")}),t=Object(a.useState)(!1),r=Object(d.a)(t,2),n=r[0],c=r[1],s=function(){return c(!n)},o=Object(y.f)(),E=Object(I.a)(),C=Object(a.useState)({status:"info",title:"Enter valid credentials",description:"enter valid email address and password",duration:3e3}),F=Object(d.a)(C,2),N=F[0],A=F[1];Object(a.useEffect)((function(){E({title:N.title,description:N.description,status:N.status,duration:N.duration,isClosable:!0})}),[N,E]);var V=function(){var e=Object(u.a)(l.a.mark((function e(t,r){var a,n,c,s;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,q.a.post("https://college-query.herokuapp.com/auth/login",{email:t.email,password:t.password});case 3:a=e.sent,n=a.data,c=n.accessToken,s=n.refreshToken,P.a.set("accessToken",c),P.a.set("refreshToken",s),o.replace("/"),r.setSubmitting(!1),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),A({status:"error",title:"invalid credentials",description:e.t0.response.data.error.message,duration:5e3});case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t,r){return e.apply(this,arguments)}}();return Object(z.jsx)(v.a,{height:"100vh",alignItems:"center",background:"gray.100",justifyContent:"center",children:Object(z.jsxs)(v.a,{direction:"column",background:"white",p:12,rounded:6,shadow:"2xl",children:[Object(z.jsx)(g.a,{mb:6,children:"Sign In"}),Object(z.jsx)(w.c,{initialValues:{email:"",password:""},validationSchema:e,onSubmit:V,children:function(e){return Object(z.jsxs)(w.b,{children:[Object(z.jsx)(w.a,{name:"email",children:function(e){var t=e.field,r=e.form;return Object(z.jsxs)(h.a,{isInvalid:r.errors.email&&r.touched.email,children:[Object(z.jsx)(b.a,{htmlFor:"email",children:"Email"}),Object(z.jsx)(m.a,Object(i.a)(Object(i.a)({},t),{},{placeholder:"Enter email",id:"email",variant:"outline",type:"email"})),Object(z.jsx)(p.a,{mb:3,children:r.errors.email})]})}}),Object(z.jsx)(w.a,{name:"password",children:function(e){var t=e.field,r=e.form;return Object(z.jsxs)(h.a,{isInvalid:r.errors.password&&r.touched.password,children:[Object(z.jsx)(b.a,{htmlFor:"password",children:"Password"}),Object(z.jsxs)(O.a,{size:"md",children:[Object(z.jsx)(m.a,Object(i.a)(Object(i.a)({},t),{},{id:"password",pr:"4.5rem",type:n?"text":"password",placeholder:"Enter password"})),Object(z.jsx)(f.a,{width:"4.5rem",children:Object(z.jsx)(j.a,{h:"1.75rem",size:"sm",onClick:s,children:n?"Hide":"Show"})})]}),Object(z.jsx)(p.a,{width:"300px",children:r.errors.password})]})}}),Object(z.jsx)(j.a,{mt:3,mb:3,colorScheme:"blue",isLoading:e.isSubmitting,type:"submit",width:"300px",children:"Log In"})]})}}),Object(z.jsxs)(k.a,{children:["Dont have account..?",Object(z.jsx)(x.a,{as:T.b,color:"teal.500",to:"/register",children:"Sign Up"})]})]})})};var N=function(){return Object(z.jsx)("div",{children:Object(z.jsx)(F,{})})};var A=function(){var e=S.a({name:S.b().required("Please enter your name").min(3,"Name must be at least 3 characters").max(20,"Name must be less than 20 characters"),email:S.b().email().required("Email is a required field"),password:S.b().required("Please enter your password").matches(/^.*(?=.{8,})((?=.*[!@#$%^&*()\-_=+{};:,<.>]){1})(?=.*\d)((?=.*[a-z]){1})((?=.*[A-Z]){1}).*$/,"Password must contain at least 8 characters, one uppercase, one number and one special case character")}),t=Object(a.useState)(!1),r=Object(d.a)(t,2),n=r[0],c=r[1],s=function(){return c(!n)},o=Object(I.a)(),y=Object(a.useState)({status:"info",title:"Enter valid credentials",description:"enter your correct name,valid email addres and strong password",duration:3e3}),E=Object(d.a)(y,2),C=E[0],P=E[1];Object(a.useEffect)((function(){o({title:C.title,description:C.description,status:C.status,duration:C.duration,isClosable:!0})}),[C,o]);var F=function(){var e=Object(u.a)(l.a.mark((function e(t,r){var a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,q.a.post("https://college-query.herokuapp.com/auth/verify-email",{name:t.name,email:t.email,password:t.password});case 3:a=e.sent,r.setSubmitting(!1),P({status:"success",title:a.data.message,description:"Please click on the link that has just been sent to your email account to verify your email and continue the registration process.",duration:1e4}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),P({status:"error",title:"Email not sent!",description:e.t0.response.data.error.message,duration:5e3});case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t,r){return e.apply(this,arguments)}}();return Object(z.jsx)(v.a,{height:"100vh",alignItems:"center",background:"gray.100",justifyContent:"center",children:Object(z.jsxs)(v.a,{direction:"column",background:"white",p:12,rounded:6,shadow:"2xl",children:[Object(z.jsx)(g.a,{mb:6,children:"Sign up"}),Object(z.jsx)(w.c,{initialValues:{name:"",email:"",password:""},validationSchema:e,onSubmit:F,children:function(e){return Object(z.jsxs)(w.b,{children:[Object(z.jsx)(w.a,{name:"name",children:function(e){var t=e.field,r=e.form;return Object(z.jsxs)(h.a,{isInvalid:r.errors.name&&r.touched.name,children:[Object(z.jsx)(b.a,{htmlFor:"name",children:"Name"}),Object(z.jsx)(m.a,Object(i.a)(Object(i.a)({},t),{},{id:"name",variant:"outline",type:"text",placeholder:"Enter name"})),Object(z.jsx)(p.a,{mb:3,children:r.errors.name})]})}}),Object(z.jsx)(w.a,{name:"email",children:function(e){var t=e.field,r=e.form;return Object(z.jsxs)(h.a,{isInvalid:r.errors.email&&r.touched.email,children:[Object(z.jsx)(b.a,{htmlFor:"email",children:"Email"}),Object(z.jsx)(m.a,Object(i.a)(Object(i.a)({},t),{},{id:"email",variant:"outline",type:"email",placeholder:"Enter email"})),Object(z.jsx)(p.a,{mb:3,children:r.errors.email})]})}}),Object(z.jsx)(w.a,{name:"password",children:function(e){var t=e.field,r=e.form;return Object(z.jsxs)(h.a,{isInvalid:r.errors.password&&r.touched.password,children:[Object(z.jsx)(b.a,{htmlFor:"password",children:"Password"}),Object(z.jsxs)(O.a,{size:"md",children:[Object(z.jsx)(m.a,Object(i.a)(Object(i.a)({},t),{},{id:"password",pr:"4.5rem",type:n?"text":"password",placeholder:"Enter password"})),Object(z.jsx)(f.a,{width:"4.5rem",children:Object(z.jsx)(j.a,{h:"1.75rem",size:"sm",onClick:s,children:n?"Hide":"Show"})})]}),Object(z.jsx)(p.a,{width:"300px",children:r.errors.password})]})}}),Object(z.jsx)(j.a,{mb:4,mt:3,width:"300px",colorScheme:"blue",isLoading:e.isSubmitting,type:"submit",children:"Register"})]})}}),Object(z.jsxs)(k.a,{children:["Already have account..?",Object(z.jsx)(x.a,{as:T.b,color:"teal.500",to:"/login",children:"Sign In"})]})]})})};var V=function(){return Object(z.jsx)("div",{children:Object(z.jsx)(A,{})})};var L=function(){var e=Object(y.f)();Object(a.useEffect)((function(){t()}));var t=function(){var a=Object(u.a)(l.a.mark((function a(){var n,c,s;return l.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(a.prev=0,n=P.a.get("accessToken"),c=P.a.get("refreshToken"),n&&c){a.next=6;break}return e.replace("/login"),a.abrupt("return");case 6:return a.next=8,q.a.get("https://college-query.herokuapp.com",{headers:{Authorization:"Bearer ".concat(n)}});case 8:a.next=30;break;case 10:if(a.prev=10,a.t0=a.catch(0),"jwt expired"!==a.t0.response.data.error.message){a.next=27;break}return s=P.a.get("refreshToken"),a.next=16,r(s);case 16:if(a.sent){a.next=24;break}return P.a.remove("accessToken"),P.a.remove("refreshToken"),e.replace("/login"),a.abrupt("return");case 24:t();case 25:a.next=30;break;case 27:P.a.remove("accessToken"),P.a.remove("refreshToken"),e.replace("/login");case 30:case"end":return a.stop()}}),a,null,[[0,10]])})));return function(){return a.apply(this,arguments)}}(),r=function(){var e=Object(u.a)(l.a.mark((function e(t){var r,a,n,c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,q.a.post("https://college-query.herokuapp.com/auth/refresh-token",{refreshToken:t});case 3:return r=e.sent,a=r.data,n=a.accessToken,c=a.refreshToken,P.a.set("accessToken",n),P.a.set("refreshToken",c),e.abrupt("return",r);case 10:return e.prev=10,e.t0=e.catch(0),e.abrupt("return");case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t){return e.apply(this,arguments)}}();return Object(z.jsxs)("div",{children:[Object(z.jsx)(g.a,{children:"this is page is under development"}),Object(z.jsx)(T.b,{to:"/logout",children:Object(z.jsx)(j.a,{children:"logOut"})})]})},H=r(328),B=r(327);var D=function(){var e=Object(y.g)().emailVerificationToken,t=Object(y.f)(),r=Object(a.useState)("email verification is processing!"),n=Object(d.a)(r,2),c=n[0],s=n[1],i=Object(a.useState)("info"),o=Object(d.a)(i,2),l=o[0],u=o[1];return Object(a.useEffect)((function(){q.a.post("https://college-query.herokuapp.com/auth/register",{emailVerificationToken:e}).then((function(e){var t=e.data,r=t.accessToken,a=t.refreshToken;P.a.set("accessToken",r),P.a.set("refreshToken",a),s("Account verified successfully. Continue!"),u("success")})).catch((function(e){s(e.response.data.error.message),u("error")}))}),[e]),Object(z.jsxs)(B.a,{height:"100vh",alignItems:"center",background:"gray.100",justifyContent:"center",children:[Object(z.jsx)(g.a,{}),Object(z.jsxs)(H.a,{status:l,width:"400px",children:[Object(z.jsx)(H.c,{}),c]}),Object(z.jsx)(j.a,{onClick:function(){return t.replace("/")},colorScheme:"blue",children:"Home"})]})};var J=function(){return Object(z.jsx)("div",{children:Object(z.jsx)(g.a,{children:"404 || NOT FOUND"})})};var U=function(){var e=Object(y.f)(),t=function(){var t=Object(u.a)(l.a.mark((function t(){var r;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,r=P.a.get("refreshToken"),t.next=4,q.a.delete("https://college-query.herokuapp.com/auth/logout",{refreshToken:r});case 4:P.a.remove("accessToken"),P.a.remove("refreshToken"),e.replace("/login"),t.next=14;break;case 9:t.prev=9,t.t0=t.catch(0),P.a.remove("accessToken"),P.a.remove("refreshToken"),e.replace("/login");case 14:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(){return t.apply(this,arguments)}}();return Object(a.useEffect)((function(){t()})),Object(z.jsx)("div",{children:Object(z.jsx)(g.a,{children:" LogoutPage "})})};var $=function(){return Object(z.jsx)("div",{className:"App",children:Object(z.jsx)(T.a,{children:Object(z.jsxs)(y.c,{children:[Object(z.jsx)(y.a,{exact:!0,path:"/",component:L}),Object(z.jsx)(y.a,{path:"/login",component:N}),Object(z.jsx)(y.a,{path:"/register",component:V}),Object(z.jsx)(y.a,{path:"/logout",component:U}),Object(z.jsx)(y.a,{path:"/verify-mail/:emailVerificationToken",component:D}),Object(z.jsx)(y.a,{path:"*",component:J})]})})})},M=r(325);s.a.render(Object(z.jsx)(n.a.StrictMode,{children:Object(z.jsx)(M.a,{children:Object(z.jsx)($,{})})}),document.getElementById("root"))}},[[303,1,2]]]);
//# sourceMappingURL=main.440dbc1f.chunk.js.map